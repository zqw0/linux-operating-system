# 内核同步方法  
## 原子操作  
原子操作是其他同步方法中的基石。原子操作可以保证指令以原子的方式执行-----执行过程不被打断。  
## 原子整数操作  
结构声明：
```
typedef struct{
        volatile int counter;
} atomic_t;
```
简单使用举例：
```
automic_t v;
automic_t u = ATOMIC_INIT(0);
automic_set(&v, 4);//v=4;
automic_add(2,&v);//v+=2;
automic_inc(&v);//v++;
```
给出部分api使用说明。详细api在p143页。
```
ATOMIC_INIT(int i)            在声明一个automic_t 变量时，初始化为i；
int atomic_read(atomic_t *v)          原子读取整数变量v
void atomic_set(atomic_t *v, int i)   原子设置v的值为i
void atomic_add(int i, atomic_t *v) 原子的给v的值+i
void atomic_sub(int i, atomic_t *v) 原子的给v的值-i
void atomic_inc(atomic_t *v)原子的给v的值-1
....
```
